
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://thvitt.github.io/api/">
      
      
        <link rel="prev" href="..">
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>API Documentation - logproc – Run programs and log their output</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="logproc – Run programs and log their output" class="md-header__button md-logo" aria-label="logproc – Run programs and log their output" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            logproc – Run programs and log their output
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Documentation
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/thvitt/logproc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="logproc – Run programs and log their output" class="md-nav__button md-logo" aria-label="logproc – Run programs and log their output" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    logproc – Run programs and log their output
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/thvitt/logproc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    logproc
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    API Documentation
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    API Documentation
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#logproc" class="md-nav__link">
    <span class="md-ellipsis">
      
        logproc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logproc.aexecute" class="md-nav__link">
    <span class="md-ellipsis">
      
        aexecute
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logproc.execute" class="md-nav__link">
    <span class="md-ellipsis">
      
        execute
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logproc.limit_concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      
        limit_concurrency
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logproc.map_unordered" class="md-nav__link">
    <span class="md-ellipsis">
      
        map_unordered
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logproc.proc_logger" class="md-nav__link">
    <span class="md-ellipsis">
      
        proc_logger
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#logproc" class="md-nav__link">
    <span class="md-ellipsis">
      
        logproc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logproc.aexecute" class="md-nav__link">
    <span class="md-ellipsis">
      
        aexecute
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logproc.execute" class="md-nav__link">
    <span class="md-ellipsis">
      
        execute
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logproc.limit_concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      
        limit_concurrency
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logproc.map_unordered" class="md-nav__link">
    <span class="md-ellipsis">
      
        map_unordered
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logproc.proc_logger" class="md-nav__link">
    <span class="md-ellipsis">
      
        proc_logger
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-documentation">API Documentation</h1>


<div class="doc doc-object doc-module">



<a id="logproc"></a>
    <div class="doc doc-contents first">

        <p>Run a process and log stdin and stdout.</p>
<p>This experimental module offers a function <code>execute()</code> that runs a commandline
in a subprocess and separately live captures the called process’s standard
output and standard error. By default, the output is logged at different
levels, but it is possible to provide a callback for different handling.</p>

          











<p><span class="doc-section-title">Functions:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="aexecute


  
      async
   (logproc.aexecute)" href="#logproc.aexecute">aexecute</a></code></b>
            –
            <div class="doc-md-description">
              <p>Asynchronously run the given command and log its output as it appears.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="execute (logproc.execute)" href="#logproc.execute">execute</a></code></b>
            –
            <div class="doc-md-description">
              <p>Run the given command and log its output as it appears, blocking while the program runs.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="limit_concurrency


  
      async
   (logproc.limit_concurrency)" href="#logproc.limit_concurrency">limit_concurrency</a></code></b>
            –
            <div class="doc-md-description">
              <p>Run at most <code>limit</code> of the given awaitables concurrently, yielding completed tasks as they finish.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="map_unordered


  
      async
   (logproc.map_unordered)" href="#logproc.map_unordered">map_unordered</a></code></b>
            –
            <div class="doc-md-description">
              <p>Executes the given async function <code>func</code> on each item from <code>iterable</code>, yielding results as they complete, while limiting the number of concurrent tasks to <code>limit</code>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="proc_logger (logproc.proc_logger)" href="#logproc.proc_logger">proc_logger</a></code></b>
            –
            <div class="doc-md-description">
              <p>Creates a callback for execute() that logs to a logger.</p>
            </div>
          </li>
    </ul>





<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h2 id="logproc.aexecute" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">aexecute</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">aexecute</span><span class="p">(</span>
    <span class="n">cmd</span><span class="p">,</span>
    <span class="n">stdout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">stdout_level</span><span class="o">=</span><span class="n"><a class="autorefs autorefs-external" title="logging.INFO" href="https://docs.python.org/3/library/logging.html#logging.INFO">INFO</a></span><span class="p">,</span>
    <span class="n">stderr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">stderr_level</span><span class="o">=</span><span class="n"><a class="autorefs autorefs-external" title="logging.WARNING" href="https://docs.python.org/3/library/logging.html#logging.WARNING">WARNING</a></span><span class="p">,</span>
    <span class="n">cwd</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Asynchronously run the given command and log its output as it appears.</p>


<details class="description" open>
  <summary>Description</summary>
  <p><code>aexecute</code> runs the given command and waits for it to finish. While it
is running, its stdout and stderr streams are monitored. Each new line
appearing on these streams are immediately handled.</p>
<p>The default handlers will log the message from the subprocess to a
logger that logs using the first member of the cmd sequence as a logger
name and logging.INFO for stdout and logging.WARNING for stderr output.</p>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>cmd</code></b>
              (<code><a class="autorefs autorefs-external" title="collections.abc.Sequence" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence">Sequence</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>)
          –
          <div class="doc-md-description">
            <p>A list of arguments, as in subprocess.run etc.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>stdout</code></b>
              (<code><span title="logproc.OutputHandler">OutputHandler</span> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Handlers for the standard output stream. Each of these can be:</p>
<ul>
<li>None (the default) to use the default settings</li>
<li>a logger name</li>
<li>a <code>logging.Logger</code></li>
<li>a callback that receives a line as <code>str</code> or <code>bytes</code> as argument and handles that</li>
</ul>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>stderr</code></b>
              (<code><span title="logproc.OutputHandler">OutputHandler</span> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Like stdout, but for standard error.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>stdout_level</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code><a class="autorefs autorefs-external" title="logging.INFO" href="https://docs.python.org/3/library/logging.html#logging.INFO">INFO</a></code>
)
          –
          <div class="doc-md-description">
            
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>stderr_level</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code><a class="autorefs autorefs-external" title="logging.WARNING" href="https://docs.python.org/3/library/logging.html#logging.WARNING">WARNING</a></code>
)
          –
          <div class="doc-md-description">
            <p>Logging levels for the specific output.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>prefix</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>A string that is prepended to each line before logging.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>kwargs</code></b>
          –
          <div class="doc-md-description">
            <p>Additional keyword arguments to be passed to <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/asyncio-subprocess.html#asyncio.create_subprocess_exec">asyncio.create_subprocess_exec</a></p>
          </div>
        </li>
    </ul>
        <p>Returns:
    the command’s exit code</p>

          

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="logproc.execute" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">execute</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">execute</span><span class="p">(</span>
    <span class="n">cmd</span><span class="p">,</span>
    <span class="n">stdout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">stdout_level</span><span class="o">=</span><span class="n"><a class="autorefs autorefs-external" title="logging.INFO" href="https://docs.python.org/3/library/logging.html#logging.INFO">INFO</a></span><span class="p">,</span>
    <span class="n">stderr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">stderr_level</span><span class="o">=</span><span class="n"><a class="autorefs autorefs-external" title="logging.WARNING" href="https://docs.python.org/3/library/logging.html#logging.WARNING">WARNING</a></span><span class="p">,</span>
    <span class="n">cwd</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Run the given command and log its output as it appears, blocking while the program runs.</p>


<details class="description" open>
  <summary>Description</summary>
  <p><code>execute</code> runs the given command and waits for it to finish. While it
is running, its stdout and stderr streams are monitored. Each new line
appearing on these streams are immediately handled.</p>
<p>The default handlers will log the message from the subprocess to a
logger that logs using the first member of the cmd sequence as a logger
name and logging.INFO for stdout and logging.WARNING for stderr output.</p>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>cmd</code></b>
              (<code><a class="autorefs autorefs-external" title="collections.abc.Sequence" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence">Sequence</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>)
          –
          <div class="doc-md-description">
            <p>A list of arguments, as in subprocess.run etc.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>stdout</code></b>
              (<code><span title="logproc.OutputHandler">OutputHandler</span> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Handlers for the standard output stream. Each of these can be:</p>
<ul>
<li>None (the default) to use the default settings</li>
<li>a logger name</li>
<li>a <code>logging.Logger</code></li>
<li>a callback that receives a line as <code>str</code> or <code>bytes</code> as argument and handles that</li>
</ul>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>stderr</code></b>
              (<code><span title="logproc.OutputHandler">OutputHandler</span> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Like stdout, but for standard error.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>stdout_level</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code><a class="autorefs autorefs-external" title="logging.INFO" href="https://docs.python.org/3/library/logging.html#logging.INFO">INFO</a></code>
)
          –
          <div class="doc-md-description">
            
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>stderr_level</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code><a class="autorefs autorefs-external" title="logging.WARNING" href="https://docs.python.org/3/library/logging.html#logging.WARNING">WARNING</a></code>
)
          –
          <div class="doc-md-description">
            <p>Logging levels for the specific output.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>prefix</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>A string that is prepended to each line before logging.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>kwargs</code></b>
          –
          <div class="doc-md-description">
            <p>Additional keyword arguments to be passed to <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/asyncio-subprocess.html#asyncio.create_subprocess_exec">asyncio.create_subprocess_exec</a></p>
          </div>
        </li>
    </ul>
        <p>Returns:
    the command’s exit code</p>


<details class="see-also" open>
  <summary>See also</summary>
  <p>aexecute()</p>
</details>
          

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="logproc.limit_concurrency" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">limit_concurrency</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">limit_concurrency</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Run at most <code>limit</code> of the given awaitables concurrently, yielding completed tasks as they finish.</p>

          

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="logproc.map_unordered" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">map_unordered</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">map_unordered</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes the given async function <code>func</code> on each item from <code>iterable</code>, yielding results as they complete, while limiting the number of concurrent tasks to <code>limit</code>.
This function will not consume more items from iterable than it can start while maintaining the concurrency limit.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>func</code></b>
              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[[<span title="logproc.T">T</span>], <a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a>[<span title="logproc.R">R</span>]]</code>)
          –
          <div class="doc-md-description">
            <p>a coroutine function to apply to each item of the given iterable</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>iterable</code></b>
              (<code><a class="autorefs autorefs-external" title="collections.abc.Iterable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable">Iterable</a>[<span title="logproc.T">T</span>] | <a class="autorefs autorefs-external" title="collections.abc.AsyncIterable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterable">AsyncIterable</a>[<span title="logproc.T">T</span>]</code>)
          –
          <div class="doc-md-description">
            <p>an iterable or async iterable of items to process</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>limit</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Maximum number of concurrent tasks. If None, defaults to the number of CPU cores available to the process.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" title="collections.abc.AsyncGenerator" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncGenerator">AsyncGenerator</a>[<span title="logproc.R">R</span>, None]</code>
          –
          <div class="doc-md-description">
            <p>The results of the function calls, in the order they complete.</p>
          </div>
        </li>
    </ul>


<details class="see-also" open>
  <summary>See also</summary>
  <p>https://death.andgravity.com/limit-concurrency</p>
</details>
          

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="logproc.proc_logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">proc_logger</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">proc_logger</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n"><a class="autorefs autorefs-external" title="logging.INFO" href="https://docs.python.org/3/library/logging.html#logging.INFO">INFO</a></span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates a callback for execute() that logs to a logger.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>prefix</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>String that will be prepended to each line</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>logger</code></b>
              (<code><span title="logproc.LoggerSpec">LoggerSpec</span></code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>If given, this is either a logger or the name of a logger.
    If missing, we log to the root logger.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>level</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code><a class="autorefs autorefs-external" title="logging.INFO" href="https://docs.python.org/3/library/logging.html#logging.INFO">INFO</a></code>
)
          –
          <div class="doc-md-description">
            <p>The level at which to log the messages.</p>
          </div>
        </li>
    </ul>

          

    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["search.highlight", "search.suggest", "navigation.tracking"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>